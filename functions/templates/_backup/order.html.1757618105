<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.1">
  <style type="text/css">
    body {background-color: #eff2f7}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;!DOCTYPE html&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;html lang="ca"&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;head&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>&lt;meta charset="utf-8"&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>&lt;title&gt;Ordenar fotografies&lt;/title&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>&lt;style&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>body { font-family: Arial, sans-serif; margin: 0; background-color: #f5f7fa; }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>.container { max-width: 1100px; width: 92%; margin: 28px auto; padding: 22px; background: #fff; border-radius: 10px; box-shadow: 0 8px 20px rgba(0,0,0,.08); }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>#imgList { list-style: none; padding: 0; margin: -10px; display: flex; flex-wrap: wrap; }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>#imgList li { position: relative; margin: 10px; border: 1px solid #d0d7de; padding: 6px 44px 6px 6px; cursor: move; box-sizing: border-box; flex: 1 0 calc(20% - 20px); max-width: calc(20% - 20px); border-radius: 8px; }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>#imgList li img { display: block; width: 100%; height: auto; border-radius: 6px; }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>.btns { position: absolute; right: 6px; top: 6px; display:flex; flex-direction: column; gap:6px; }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>.btns a, .btns button { font-size: 12px; padding: 5px 6px; border-radius: 5px; border: 0; cursor: pointer; text-decoration: none; color:#fff; }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>.edit { background:#0a66ff; } .edit:hover { background:#004bd6; }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>.del { background:#e74c3c; } .del:hover { background:#c0392b; }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>button[type=submit] { margin-top: 16px; padding: 12px 24px; font-size: 16px; background:#007BFF; color:#fff; border: none; border-radius: 8px; cursor: pointer; }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>button[type=submit]:hover { background:#0056b3; }</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>&lt;/style&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;/head&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;body&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;div class="container"&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>&lt;h1&gt;Ordenar fotografies&lt;/h1&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>&lt;div class="info"&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>{% if nat %}&lt;strong&gt;NAT:&lt;/strong&gt; {{ nat }}{% endif %}</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>{% if dil %}{% if nat %}, {% endif %}&lt;strong&gt;Dil:&lt;/strong&gt; {{ dil }}{% endif %}</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>&lt;/div&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>&lt;form action="{{ url_for('generate') }}" method="post" onsubmit="updateOrder()"&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>&lt;input type="hidden" id="order" name="order"&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>&lt;ul id="imgList"&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">      </span>{% for img in images %}</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">        </span>&lt;li draggable="true" data-filename="{{ img }}"&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">          </span>&lt;img src="{{ url_for('uploaded_file', filename=img) }}?ts={{ ts }}" alt="{{ img }}"&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">          </span>&lt;div class="btns"&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">            </span>&lt;a class="edit" href="{{ url_for('edit', filename=img) }}"&gt;Editar&lt;/a&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">            </span>&lt;button type="button" class="del" onclick="removeImage(this)"&gt;Eliminar&lt;/button&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">          </span>&lt;/div&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">        </span>&lt;/li&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">      </span>{% endfor %}</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>&lt;/ul&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">    </span>&lt;button type="submit"&gt;Generar informe&lt;/button&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>&lt;/form&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>&lt;p style="font-size:14px;margin-top:10px"&gt;&lt;a href="{{ url_for('index') }}"&gt;Tornar a l'inici&lt;/a&gt;&lt;/p&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;/div&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;script&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>const list = document.getElementById('imgList');</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>let dragItem = null;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>list.addEventListener('dragstart', e =&gt; { const li = e.target.closest('li'); dragItem = li; e.dataTransfer.effectAllowed='move'; });</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>list.addEventListener('dragover', e =&gt; e.preventDefault());</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>list.addEventListener('dragenter', e =&gt; { const li = e.target.closest('li'); if (!li || li===dragItem) return; list.insertBefore(dragItem, li); updateOrder(); });</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 28.0px"><span class="s1"><b></b></span><br></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>function updateOrder(){</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>const items=[...document.querySelectorAll('#imgList li')];</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>const names=items.map(li=&gt;li.dataset.filename);</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>document.getElementById('order').value = names.join(',');</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>fetch('/update_order',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({order:names})});</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>}</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>function removeImage(btn){</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>const li = btn.closest('li'); const filename = li.dataset.filename;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b><span class="Apple-converted-space">  </span>fetch(`/delete/${encodeURIComponent(filename)}`,{method:'POST'}).then(r=&gt;r.json()).then(()=&gt;{ li.remove(); updateOrder(); });</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>}</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;/script&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;/body&gt;</b></span></h1>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; font: 24.0px Arial; -webkit-text-stroke: #000000; background-color: #ffffff"><span class="s1"><b>&lt;/html&gt;</b></span></h1>
</body>
</html>
