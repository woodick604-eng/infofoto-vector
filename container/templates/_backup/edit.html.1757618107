<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.1">
  <style type="text/css">
    body {background-color: #f2f5f9}
    p.p1 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Arial; color: #0d49ff; -webkit-text-stroke: #0d49ff}
    p.p2 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Arial; color: #0d49ff; -webkit-text-stroke: #0d49ff; min-height: 14.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="ca"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;meta charset="utf-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;title&gt;Editar fotografia&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>body { font-family: Arial, sans-serif; margin: 12px; background:#f5f7fa; color:#111; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.wrap { display:grid; grid-template-columns: 1fr 280px; gap: 16px; align-items:start; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.panel { background:#fff; border:1px solid #d0d7de; border-radius:10px; padding:12px; box-shadow:0 8px 20px rgba(0,0,0,.08); position: sticky; top: 12px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.panel h2 { margin: 0 0 8px; font-size: 16px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.row { display:flex; align-items:center; justify-content:space-between; margin:8px 0; gap:8px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.row input[type=range]{ width: 150px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.btns { display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>button { padding:8px 12px; border:0; border-radius:6px; cursor:pointer; background:#0a66ff; color:#fff; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>button.sec { background:#e0e0e0; color:#111; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>button.warn { background:#e74c3c; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>canvas { max-width: 100%; height: auto; background:#fff; border:1px solid #d0d7de; border-radius:8px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.mode { font-size:12px; color:#333; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.tips { font-size:12px; color:#666; margin-top:6px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;p&gt;&lt;a href="{{ url_for('order') }}"&gt;&amp;larr; Tornar&lt;/a&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;div class="wrap"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;canvas id="cvs"&gt;&lt;/canvas&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;div class="tips"&gt;Consells: amb el mode &lt;b&gt;Pinzell pixelat&lt;/b&gt; pots tapar cares o matrícules; amb &lt;b&gt;Rectangle pixelat&lt;/b&gt; arrossega per definir la zona.&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div class="panel"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;h2&gt;Eines&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;div class="row"&gt;&lt;label&gt;Mode&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;select id="mode"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;option value="none"&gt;Ajustos&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;option value="brush"&gt;Pinzell pixelat&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;option value="rect"&gt;Rectangle pixelat&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/select&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;div class="row"&gt;&lt;label&gt;Mida pinzell&lt;/label&gt;&lt;input id="brush" type="range" min="6" max="80" value="22"&gt;&lt;span class="mode" id="lblBrush"&gt;22 px&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;div class="row"&gt;&lt;label&gt;Brillantor&lt;/label&gt;&lt;input id="rngBri" type="range" min="-100" max="100" value="0"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;div class="row"&gt;&lt;label&gt;Contrast&lt;/label&gt;&lt;input id="rngCon" type="range" min="-100" max="100" value="0"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;div class="row"&gt;&lt;label&gt;Saturació&lt;/label&gt;&lt;input id="rngSat" type="range" min="-100" max="100" value="0"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;div class="btns"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;button id="btnUndo" class="sec"&gt;Desfer&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;button id="btnRedo" class="sec"&gt;Refés&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;button id="btnRot"<span class="Apple-converted-space">  </span>class="sec"&gt;Rotar 90°&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;button id="btnFlipH" class="sec"&gt;Voltejar H&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;button id="btnFlipV" class="sec"&gt;Voltejar V&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;button id="btnClear" class="warn"&gt;Treure ajustos&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;button id="btnSave"&gt;Guardar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;script&gt;</span></p>
<p class="p1"><span class="s1">const filename = {{ filename|tojson }};</span></p>
<p class="p1"><span class="s1">const ts = {{ ts }};</span></p>
<p class="p1"><span class="s1">const imgUrl = "{{ url_for('uploaded_file', filename=filename) }}?ts=" + ts;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">const cvs = document.getElementById('cvs');</span></p>
<p class="p1"><span class="s1">const ctx = cvs.getContext('2d', { willReadFrequently: true });</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">let baseImg = new Image();</span></p>
<p class="p1"><span class="s1">let bri=0, con=0, sat=0;</span></p>
<p class="p1"><span class="s1">let undoStack = [], redoStack = [];</span></p>
<p class="p1"><span class="s1">let mode = 'none', brushSize = 22;</span></p>
<p class="p1"><span class="s1">let rectStart = null;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function pushState(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>undoStack.push(cvs.toDataURL('image/png'));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>if (undoStack.length&gt;40) undoStack.shift();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>redoStack.length = 0;</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">function applyFilters(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>ctx.filter = `brightness(${100+bri}%) contrast(${100+con}%) saturate(${100+sat}%)`;</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">function redrawBase(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>cvs.width = baseImg.naturalWidth;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>cvs.height = baseImg.naturalHeight;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>ctx.clearRect(0,0,cvs.width,cvs.height);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>applyFilters();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>ctx.drawImage(baseImg,0,0);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">function load(url){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>baseImg = new Image();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>baseImg.crossOrigin = 'anonymous';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>baseImg.onload = ()=&gt;{ redrawBase(); pushState(); };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>baseImg.src = url;</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">load(imgUrl);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// Controls</span></p>
<p class="p1"><span class="s1">document.getElementById('rngBri').oninput = e =&gt; { bri=+e.target.value; redrawBase(); };</span></p>
<p class="p1"><span class="s1">document.getElementById('rngCon').oninput = e =&gt; { con=+e.target.value; redrawBase(); };</span></p>
<p class="p1"><span class="s1">document.getElementById('rngSat').oninput = e =&gt; { sat=+e.target.value; redrawBase(); };</span></p>
<p class="p1"><span class="s1">document.getElementById('mode').onchange = e =&gt; { mode = e.target.value; rectStart=null; };</span></p>
<p class="p1"><span class="s1">document.getElementById('brush').oninput = e =&gt; { brushSize=+e.target.value; document.getElementById('lblBrush').textContent=brushSize+' px'; };</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">document.getElementById('btnClear').onclick = ()=&gt;{ bri=con=sat=0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>document.getElementById('rngBri').value=0; document.getElementById('rngCon').value=0; document.getElementById('rngSat').value=0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>redrawBase(); pushState();</span></p>
<p class="p1"><span class="s1">};</span></p>
<p class="p1"><span class="s1">document.getElementById('btnRot').onclick = ()=&gt;{ pushState(); rotate90(); };</span></p>
<p class="p1"><span class="s1">document.getElementById('btnFlipH').onclick = ()=&gt;{ pushState(); flip(true,false); };</span></p>
<p class="p1"><span class="s1">document.getElementById('btnFlipV').onclick = ()=&gt;{ pushState(); flip(false,true); };</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">document.getElementById('btnUndo').onclick = ()=&gt;{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>if (undoStack.length&lt;2) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>redoStack.push(undoStack.pop());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const img = new Image(); img.onload = ()=&gt;{ ctx.setTransform(1,0,0,1,0,0); ctx.filter='none'; cvs.width=img.width; cvs.height=img.height; ctx.drawImage(img,0,0); };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>img.src = undoStack[undoStack.length-1];</span></p>
<p class="p1"><span class="s1">};</span></p>
<p class="p1"><span class="s1">document.getElementById('btnRedo').onclick = ()=&gt;{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>if (!redoStack.length) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const data = redoStack.pop(); undoStack.push(data);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const img = new Image(); img.onload = ()=&gt;{ ctx.setTransform(1,0,0,1,0,0); ctx.filter='none'; cvs.width=img.width; cvs.height=img.height; ctx.drawImage(img,0,0); };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>img.src = data;</span></p>
<p class="p1"><span class="s1">};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function rotate90(){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const tmp = document.createElement('canvas');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>tmp.width = cvs.height; tmp.height = cvs.width;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const tctx = tmp.getContext('2d');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>tctx.translate(tmp.width,0); tctx.rotate(Math.PI/2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>tctx.drawImage(cvs,0,0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>cvs.width = tmp.width; cvs.height = tmp.height;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>ctx.setTransform(1,0,0,1,0,0); ctx.filter='none'; ctx.drawImage(tmp,0,0);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">function flip(h,v){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const tmp = document.createElement('canvas');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>tmp.width=cvs.width; tmp.height=cvs.height;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>tmp.getContext('2d').drawImage(cvs,0,0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>ctx.setTransform(h?-1:1,0,0,v?-1:1,h?cvs.width:0,v?cvs.height:0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>ctx.drawImage(tmp,0,0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>ctx.setTransform(1,0,0,1,0,0);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// Pixelat (pinzell)</span></p>
<p class="p1"><span class="s1">let drawing=false;</span></p>
<p class="p1"><span class="s1">cvs.addEventListener('mousedown', e=&gt;{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>if (mode==='brush'){ drawing=true; pushState(); pixelAtEvent(e); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>else if (mode==='rect'){ rectStart = getPos(e); }</span></p>
<p class="p1"><span class="s1">});</span></p>
<p class="p1"><span class="s1">cvs.addEventListener('mousemove', e=&gt;{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>if (mode==='brush' &amp;&amp; drawing){ pixelAtEvent(e); }</span></p>
<p class="p1"><span class="s1">});</span></p>
<p class="p1"><span class="s1">cvs.addEventListener('mouseup', e=&gt;{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>if (mode==='brush' &amp;&amp; drawing){ drawing=false; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>else if (mode==='rect' &amp;&amp; rectStart){ const p=getPos(e); pixelRect(rectStart.x,rectStart.y,p.x-rectStart.x,p.y-rectStart.y); rectStart=null; pushState(); }</span></p>
<p class="p1"><span class="s1">});</span></p>
<p class="p1"><span class="s1">cvs.addEventListener('mouseleave', ()=&gt;{ drawing=false; rectStart=null; });</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function getPos(ev){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const r = cvs.getBoundingClientRect();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const x = Math.round((ev.clientX - r.left) * (cvs.width<span class="Apple-converted-space">  </span>/ r.width));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const y = Math.round((ev.clientY - r.top)<span class="Apple-converted-space">  </span>* (cvs.height / r.height));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>return {x,y};</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">function pixelAtEvent(ev){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const p = getPos(ev);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>pixelRect(p.x - brushSize/2, p.y - brushSize/2, brushSize, brushSize);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">function pixelRect(x,y,w,h){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>x=Math.max(0,Math.min(cvs.width-1,x));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>y=Math.max(0,Math.min(cvs.height-1,y));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>w=Math.min(w, cvs.width - x);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>h=Math.min(h, cvs.height - y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const block = Math.max(4, Math.floor(Math.min(w,h)/4));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>for (let yy=y; yy&lt;y+h; yy+=block){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>for (let xx=x; xx&lt;x+w; xx+=block){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const pixel = ctx.getImageData(xx,yy,1,1).data;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>ctx.fillStyle = `rgb(${pixel[0]},${pixel[1]},${pixel[2]})`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>ctx.fillRect(xx,yy,block,block);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>}</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">document.getElementById('btnSave').onclick = async ()=&gt;{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const data = cvs.toDataURL('image/jpeg', 0.92);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const r = await fetch("{{ url_for('save_edit', filename=filename) }}", {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ data })</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>const j = await r.json();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>if (j.success) { alert("Guardat!"); window.location = "{{ url_for('order') }}"; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>else { alert("Error: "+(j.error||"desconegut")); }</span></p>
<p class="p1"><span class="s1">};</span></p>
<p class="p1"><span class="s1">&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
